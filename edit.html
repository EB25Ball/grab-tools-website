<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Level JSON Editor | Grab Tools | twhlynch </title>
    <link rel="stylesheet" href="style.css">
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-BDS57RBQ3Q"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-BDS57RBQ3Q');
    </script>
    <script async src="https://unpkg.com/es-module-shims@1.3.6/dist/es-module-shims.js"></script>
    <script type="importmap">
        {
          "imports": {
            "three": "https://unpkg.com/three@0.145.0/build/three.module.js"
          }
        }
    </script>
</head>
<body>
    <img src="spindex-small.gif" alt="" id="spindex">
    <div class="title">Level JSON Editor
        <a href="index.html" class="home"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" />
        </svg></a>
    </div>
    <div class="file-selectors">
        <label for="file" id="file-custom">Choose Level!
            <div id="file-display"></div>
        </label>
        <input type="file" name="file" id="file" accept=".level">
        <label for="file" id="file-custom-a">Choose Animated Level!
            <div id="file-display-a"></div>
        </label>
        <input type="file" name="file" id="file-a" accept=".level">
        <label for="file" id="file-custom-append">Append file!
            <div id="file-display-append"></div>
        </label>
        <input type="file" name="file" id="file-append" accept=".level">
    </div>
    <p id="selected-file">Find .levels in <code>Android/data/com.slindev.grab_demo/levels/user</code> on your Quest headset!</p>
    <div id="buttons">
        <button id="download">Download</button>
        <button id="copy">Copy JSON</button>
    </div>
    <div class="editing">
        <textarea type="text" id="out"></textarea>
        <div class="leg">
            <h3>shape</h3>
            <ul>
                <li>1000:CUBE</li>
                <li>1001:SPHERE</li>
                <li>1002:CYLINDER</li>
                <li>1003:PYRAMID</li>
                <li>1004:PRISM</li>
            </ul>
            <h3>type</h3>
            <ul>
                <li>0:DEFAULT</li>
                <li>1:GRABBABLE</li>
                <li>2:ICE</li>
                <li>3:LAVA</li>
                <li>4:WOOD</li>
                <li>5:GRAPPLABLE</li>
                <li>6:GRAPPLABLE_LAVA</li>
                <li>7:GRABBABLE_CRUMBLING</li>
                <li>8:DEFAULT_COLORED</li>
                <li>9:BOUNCING</li>
            </ul>
        </div>
    </div>
    <div id="visual"><button id="refresh">refresh</button></div>
    <div id="functions">
        <h3>Functions</h3>
        <div class="function" id="function-title">
            <input type="text" maxlength="80" 
                name="title-function" 
                id="title-function" 
                placeholder="Set Title (80)">
            <input type="submit" value="Run"></input>
        </div>
        <div class="function" id="function-creators">
            <input type="text" maxlength="80"
                name="creators-function" 
                id="creators-function" 
                placeholder="Set Creators (80)">
            <input type="submit" value="Run"></input>
        </div>
        <div class="function" id="function-description">
            <input type="text" max-length="300"
                name="description-function" 
                id="description-function" 
                placeholder="Set Description (300)">
            <input type="submit" value="Run"></input>
        </div>
        <div class="function" id="function-checkpoints">
            <input type="number" max="32767"
                name="checkpoints-function" 
                id="checkpoints-function" 
                placeholder="Set Checkpoints (32767)">
            <input type="submit" value="Run"></input>
        </div>
        <!-- <div class="function" id="function-stretched-sign">
            <input type="text"
                name="stretched-sign-function" 
                id="stretched-sign-function" 
                placeholder="Stretched Sign (text)">
            <input type="submit" value="Add"></input>
        </div> -->
        <div class="function" id="function-custom-color">
            <input type="text"
                name="custom-color-function" 
                id="custom-color-function" 
                placeholder="Custom Color (255,255,255)">
            <input type="submit" value="Add"></input>
        </div>
        <div class="preset-functions">
            <input type="submit" id="max-ambience" value="Max Ambience"></input>
            <input type="submit" id="reset-ambience" value="Reset Ambience"></input>
            <input type="submit" id="clear-info" value="Clear Info"></input>
            <input type="submit" id="add-colors" value="Unobtainable Colors"></input>
            <input type="submit" id="add-crumbling" value="Unobtainable Crumbling"></input>
            <input type="submit" id="add-sf" value="Unobtainable Start/Finish"></input>
            <!-- <input type="submit" id="add-inverted" value="Inverted Nodes"></input> -->
            <input type="submit" id="group-all" value="Group All"></input>
            <!-- <input type="submit" id="ungroup-all" value="Ungroup All"></input> -->
            <input type="submit" id="load-empty" value="Load Empty"></input>
        </div>
    </div>
    <footer>Developed by&nbsp;&bull;&nbsp;.index&nbsp;&bull;&nbsp;<a href="https://github.com/twhlynch">@twhlynch</a>&nbsp;&bull;&nbsp;<a href="https://twhlynch.me">twhlynch.me</a></footer>
    <script src="//cdn.jsdelivr.net/npm/protobufjs@7.X.X/dist/protobuf.js"></script>
    <script type="text/javascript">

        function readArrayBuffer(file) {
            return new Promise(function(resolve, reject) {
                let reader = new FileReader();
                reader.onload = function() {
                    let data = reader.result;
                    protobuf.load("proto/level.proto", function(err, root) {
                        if(err) throw err;
                        let message = root.lookupType("COD.Level.Level");
                        let decoded = message.decode(new Uint8Array(data));
                        let object = message.toObject(decoded);
                        resolve(object);
                    });
                }
                reader.onerror = function() {
                    reject(reader);
                }
                reader.readAsArrayBuffer(file);
            });
        }

        function readAnimatedArrayBuffer(file) {
            return new Promise(function(resolve, reject) {
                let reader = new FileReader();
                reader.onload = function() {
                    let data = reader.result;
                    protobuf.load("proto-anim/level.proto", function(err, root) {
                        if(err) throw err;
                        let message = root.lookupType("COD.Level.Level");
                        let decoded = message.decode(new Uint8Array(data));
                        let object = message.toObject(decoded);
                        resolve(object);
                    });
                }
                reader.onerror = function() {
                    reject(reader);
                }
                reader.readAsArrayBuffer(file);
            });
        }

        function appendFile(e, anim=false) {
            let files = e.target.files;
            let readers = [];

            if (!files.length) return;

            for (let i = 0; i < files.length; i++) {
                let p = document.createElement('p');
                p.innerText = files[i].name;
                if (anim) {
                    readers.push(readAnimatedArrayBuffer(files[i]));
                } else {
                    readers.push(readArrayBuffer(files[i]));
                }
            }

            Promise.all(readers).then((values) => {
                obj = JSON.parse(document.getElementById('out').value);
                obj.levelNodes += values.levelNodes;
                document.getElementById('out').value = JSON.stringify(obj, null, 4);
            });

        }

        function loadFile(e, anim=false) {
            let files = e.target.files;
            let readers = [];

            if (!files.length) return;

            for (let i = 0; i < files.length; i++) {
                let p = document.createElement('p');
                p.innerText = files[i].name;
                document.getElementById('selected-file').innerHTML = p.outerHTML;
                if (anim) {
                    readers.push(readAnimatedArrayBuffer(files[i]));
                } else {
                    readers.push(readArrayBuffer(files[i]));
                }
            }

            Promise.all(readers).then((values) => {
                credited = values[0];
                if(credited.hasOwnProperty('description')){
                    if (!credited.description.includes(".index - level modding")) {
                        credited["description"] += "  .index - level modding";
                    }
                } else {
                    credited["description"] = ".index - level modding";
                }
                document.getElementById('out').value = JSON.stringify(credited, null, 4);
                document.getElementById('out').style.display = "block";
                document.getElementsByClassName('leg')[0].style.display = "flex";
            });

        }
        document.getElementById('download').addEventListener("click", function () {
            obj = JSON.parse(document.getElementById('out').value);
            console.log(obj);
            protobuf.load("proto/level.proto", function(err, root) {
                if(err) throw err;

                let message = root.lookupType("COD.Level.Level");
                let errMsg = message.verify(obj);
                if(errMsg) throw Error(errMsg);
                let buffer = message.encode(message.fromObject(obj)).finish();
                
                let blob = new Blob([buffer], {type: "application/octet-stream"});

                let link = document.createElement("a");
                link.href = window.URL.createObjectURL(blob);
                link.download = (Date.now()).toString().slice(0, -3)+".level";
                link.click();
            });
        }, false);

        document.getElementById("copy").addEventListener('click', function () {
            navigator.clipboard.writeText(document.getElementById('out').value);
        }, false);
    

        document.querySelector('#function-title input[type="submit"]').addEventListener('click', function () {
            var input = document.getElementById('title-function');
            obj = JSON.parse(document.getElementById('out').value);
            obj.title = input.value;
            document.getElementById('out').value = JSON.stringify(obj, null, 4);
        });

        document.querySelector('#function-creators input[type="submit"]').addEventListener('click', function () {
            var input = document.getElementById('creators-function');
            obj = JSON.parse(document.getElementById('out').value);
            obj.creators = input.value;
            document.getElementById('out').value = JSON.stringify(obj, null, 4);
        });

        document.querySelector('#function-description input[type="submit"]').addEventListener('click', function () {
            var input = document.getElementById('description-function');
            obj = JSON.parse(document.getElementById('out').value);
            obj.description = input.value;
            document.getElementById('out').value = JSON.stringify(obj, null, 4);
        });

        document.querySelector('#function-checkpoints input[type="submit"]').addEventListener('click', function () {
            var input = document.getElementById('checkpoints-function');
            obj = JSON.parse(document.getElementById('out').value);
            obj.maxCheckpointCount = input.value;
            document.getElementById('out').value = JSON.stringify(obj, null, 4);
        });

        // document.querySelector('#function-stretched-sign input[type="submit"]').addEventListener('click', function () {
        //     var input = document.getElementById('stretched-sign-function');
        //     obj = JSON.parse(document.getElementById('out').value);
        //     // sign
        //     document.getElementById('out').value = JSON.stringify(obj, null, 4);
        // });

        document.querySelector('#function-custom-color input[type="submit"]').addEventListener('click', function () {
            var input = document.getElementById('custom-color-function');
            obj = JSON.parse(document.getElementById('out').value);
            var color = input.value.replaceAll("(", "").replaceAll(")", "").replaceAll(" ", "").split(",");
            for (let index = 0; index < 5; index++) {
                obj.levelNodes.push({
                    "levelNodeStatic": {
                        "shape": 1000+index,
                        "material": 8,
                        "position": {
                            "x": 0,
                            "y": 0,
                            "z": 0
                        },
                        "scale": {
                            "x": 1,
                            "y": 1,
                            "z": 1
                        },
                        "rotation": {
                            "w": 1,
                        },
                        "color": {
                            "r": parseInt(color[0])/255,
                            "g": parseInt(color[1])/255,
                            "b": parseInt(color[2])/255,
                            "a": 1
                        }
                    }
                });
            }
            document.getElementById('out').value = JSON.stringify(obj, null, 4);
        });


        document.getElementById("group-all").addEventListener('click', function () {
            obj = JSON.parse(document.getElementById('out').value);
            obj.levelNodes = [{
                "levelNodeGroup": {
                    "position": {
                        "y": 0, 
                        "x": 0, 
                        "z": 0
                    }, 
                    "rotation": {
                        "w": 1.0
                    }, 
                    "childNodes": obj.levelNodes, 
                    "scale": {
                        "y": 1.0, 
                        "x": 1.0, 
                        "z": 1.0
                    }
                }
            }];
            document.getElementById('out').value = JSON.stringify(obj, null, 4);
        });

        // document.getElementById("ungroup-all").addEventListener('click', function () {
            
        // });

        // document.getElementById("add-inverted").addEventListener('click', function () {
            
        // });

        document.getElementById("add-sf").addEventListener('click', function () {
            var startfinish = {
        "levelNodeGroup": {
            "position": {
                "y": 0,
                "x": 0,
                "z": 0
            },
            "rotation": {
                "w": 1
            },
            "childNodes": [
                {
                    "levelNodeGroup": {
                        "position": {
                            "x": -4,
                            "y": 2
                        },
                        "scale": {
                            "x": 1,
                            "y": 1,
                            "z": 1
                        },
                        "rotation": {
                            "y": -0.04361938685178757,
                            "w": 0.9990482330322266
                        },
                        "childNodes": [
                            {
                                "levelNodeStart": {
                                    "position": {
                                        "x": 1,
                                        "y": 1,
                                        "z": 1
                                    },
                                    "rotation": {
                                        "w": 1
                                    },
                                    "radius": 1
                                }
                            }
                        ]
                    }
                },
                {
                    "levelNodeGroup": {
                        "position": {
                            "x": -8,
                            "y": 2
                        },
                        "scale": {
                            "x": 1,
                            "y": 1,
                            "z": 1
                        },
                        "rotation": {
                            "y": -0.13052619993686676,
                            "w": 0.9914448857307434
                        },
                        "childNodes": [
                            {
                                "levelNodeFinish": {
                                    "position": {
                                        "x": 1,
                                        "y": 1,
                                        "z": 1
                                    },
                                    "radius": 1
                                }
                            }
                        ]
                    }
                },
                {
                    "levelNodeGroup": {
                        "position": {
                            "x": -14,
                            "y": -98
                        },
                        "scale": {
                            "x": 1,
                            "y": 100,
                            "z": 1
                        },
                        "rotation": {
                            "w": 1
                        },
                        "childNodes": [
                            {
                                "levelNodeStart": {
                                    "position": {
                                        "x": 1,
                                        "y": 1,
                                        "z": 1
                                    },
                                    "rotation": {
                                        "w": 1
                                    },
                                    "radius": 1
                                }
                            }
                        ]
                    }
                },
                {
                    "levelNodeGroup": {
                        "position": {
                            "x": -18,
                            "y": -98
                        },
                        "scale": {
                            "x": 1,
                            "y": 100,
                            "z": 1
                        },
                        "rotation": {
                            "w": 1
                        },
                        "childNodes": [
                            {
                                "levelNodeFinish": {
                                    "position": {
                                        "x": 1,
                                        "y": 1,
                                        "z": 1
                                    },
                                    "radius": 1
                                }
                            }
                        ]
                    }
                },
                {
                    "levelNodeGroup": {
                        "position": {
                            "x": -6,
                            "y": 2,
                            "z": -10
                        },
                        "scale": {
                            "x": 10,
                            "y": 1,
                            "z": 1
                        },
                        "rotation": {
                            "w": 1
                        },
                        "childNodes": [
                            {
                                "levelNodeStart": {
                                    "position": {
                                        "x": 1,
                                        "y": 1,
                                        "z": 1
                                    },
                                    "rotation": {
                                        "w": 1
                                    },
                                    "radius": 1
                                }
                            }
                        ]
                    }
                },
                {
                    "levelNodeGroup": {
                        "position": {
                            "x": -6,
                            "y": 2,
                            "z": -6
                        },
                        "scale": {
                            "x": 10,
                            "y": 1,
                            "z": 1
                        },
                        "rotation": {
                            "w": 1
                        },
                        "childNodes": [
                            {
                                "levelNodeFinish": {
                                    "position": {
                                        "x": 1,
                                        "y": 1,
                                        "z": 1
                                    },
                                    "radius": 1
                                }
                            }
                        ]
                    }
                }
            ],
            "scale": {
                "y": 1,
                "x": 1,
                "z": 1
            }
        }
    };
            obj = JSON.parse(document.getElementById('out').value);
            obj.levelNodes.push(startfinish);
            document.getElementById('out').value = JSON.stringify(obj, null, 4);
        });

        document.getElementById("add-crumbling").addEventListener('click', function () {
            var crumbling = {
        "levelNodeGroup": {
            "position": {
                "y": 0,
                "x": 0,
                "z": 0
            },
            "rotation": {
                "w": 1
            },
            "childNodes": [
                {
                    "levelNodeGroup": {
                        "position": {
                            "y": 0,
                            "x": 0,
                            "z": 0
                        },
                        "rotation": {
                            "w": 1
                        },
                        "childNodes": [
                            {
                                "levelNodeCrumbling": {
                                    "shape": 1000,
                                    "material": 7,
                                    "position": {
                                        "x": -5,
                                        "y": 5,
                                        "z": -4
                                    },
                                    "scale": {
                                        "x": 1,
                                        "y": 1,
                                        "z": 1
                                    },
                                    "rotation": {
                                        "w": 1
                                    },
                                    "stableTime": 0.10000000149011612,
                                    "respawnTime": 8
                                }
                            },
                            {
                                "levelNodeCrumbling": {
                                    "shape": 1000,
                                    "material": 7,
                                    "position": {
                                        "x": -4,
                                        "y": 5,
                                        "z": -4
                                    },
                                    "scale": {
                                        "x": 1,
                                        "y": 1,
                                        "z": 1
                                    },
                                    "rotation": {
                                        "w": 1
                                    },
                                    "stableTime": 0.20000000298023224,
                                    "respawnTime": 8
                                }
                            },
                            {
                                "levelNodeCrumbling": {
                                    "shape": 1000,
                                    "material": 7,
                                    "position": {
                                        "x": -2.9999992847442627,
                                        "y": 5,
                                        "z": -4
                                    },
                                    "scale": {
                                        "x": 1,
                                        "y": 1,
                                        "z": 1
                                    },
                                    "rotation": {
                                        "w": 1
                                    },
                                    "stableTime": 0.30000001192092896,
                                    "respawnTime": 8
                                }
                            },
                            {
                                "levelNodeCrumbling": {
                                    "shape": 1001,
                                    "material": 7,
                                    "position": {
                                        "x": -5,
                                        "y": 5,
                                        "z": -3
                                    },
                                    "scale": {
                                        "x": 1,
                                        "y": 1,
                                        "z": 1
                                    },
                                    "rotation": {
                                        "x": -0.5,
                                        "y": -0.5,
                                        "z": 0.5,
                                        "w": 0.5
                                    },
                                    "stableTime": 0.10000000149011612,
                                    "respawnTime": 8
                                }
                            },
                            {
                                "levelNodeCrumbling": {
                                    "shape": 1001,
                                    "material": 7,
                                    "position": {
                                        "x": -4,
                                        "y": 5,
                                        "z": -3
                                    },
                                    "scale": {
                                        "x": 1,
                                        "y": 1,
                                        "z": 1
                                    },
                                    "rotation": {
                                        "x": -0.5,
                                        "y": -0.5,
                                        "z": 0.5,
                                        "w": 0.5
                                    },
                                    "stableTime": 0.20000000298023224,
                                    "respawnTime": 8
                                }
                            },
                            {
                                "levelNodeCrumbling": {
                                    "shape": 1001,
                                    "material": 7,
                                    "position": {
                                        "x": -2.9999992847442627,
                                        "y": 5,
                                        "z": -3
                                    },
                                    "scale": {
                                        "x": 1,
                                        "y": 1,
                                        "z": 1
                                    },
                                    "rotation": {
                                        "x": -0.5,
                                        "y": -0.5,
                                        "z": 0.5,
                                        "w": 0.5
                                    },
                                    "stableTime": 0.30000001192092896,
                                    "respawnTime": 8
                                }
                            },
                            {
                                "levelNodeCrumbling": {
                                    "shape": 1002,
                                    "material": 7,
                                    "position": {
                                        "x": -5,
                                        "y": 5,
                                        "z": -2
                                    },
                                    "scale": {
                                        "x": 1,
                                        "y": 1,
                                        "z": 1
                                    },
                                    "rotation": {
                                        "y": -0.7071068286895752,
                                        "w": 0.7071068286895752
                                    },
                                    "stableTime": 0.10000000149011612,
                                    "respawnTime": 8
                                }
                            },
                            {
                                "levelNodeCrumbling": {
                                    "shape": 1002,
                                    "material": 7,
                                    "position": {
                                        "x": -4,
                                        "y": 5,
                                        "z": -2
                                    },
                                    "scale": {
                                        "x": 1,
                                        "y": 1,
                                        "z": 1
                                    },
                                    "rotation": {
                                        "y": -0.7071068286895752,
                                        "w": 0.7071068286895752
                                    },
                                    "stableTime": 0.20000000298023224,
                                    "respawnTime": 8
                                }
                            },
                            {
                                "levelNodeCrumbling": {
                                    "shape": 1002,
                                    "material": 7,
                                    "position": {
                                        "x": -2.9999992847442627,
                                        "y": 5,
                                        "z": -2
                                    },
                                    "scale": {
                                        "x": 1,
                                        "y": 1,
                                        "z": 1
                                    },
                                    "rotation": {
                                        "y": -0.7071068286895752,
                                        "w": 0.7071068286895752
                                    },
                                    "stableTime": 0.30000001192092896,
                                    "respawnTime": 8
                                }
                            },
                            {
                                "levelNodeCrumbling": {
                                    "shape": 1003,
                                    "material": 7,
                                    "position": {
                                        "x": -5,
                                        "y": 5,
                                        "z": -1
                                    },
                                    "scale": {
                                        "x": 1,
                                        "y": 1,
                                        "z": 1
                                    },
                                    "rotation": {
                                        "y": -0.7071068286895752,
                                        "w": 0.7071068286895752
                                    },
                                    "stableTime": 0.10000000149011612,
                                    "respawnTime": 8
                                }
                            },
                            {
                                "levelNodeCrumbling": {
                                    "shape": 1003,
                                    "material": 7,
                                    "position": {
                                        "x": -4,
                                        "y": 5,
                                        "z": -1
                                    },
                                    "scale": {
                                        "x": 1,
                                        "y": 1,
                                        "z": 1
                                    },
                                    "rotation": {
                                        "y": -0.7071068286895752,
                                        "w": 0.7071068286895752
                                    },
                                    "stableTime": 0.20000000298023224,
                                    "respawnTime": 8
                                }
                            },
                            {
                                "levelNodeCrumbling": {
                                    "shape": 1003,
                                    "material": 7,
                                    "position": {
                                        "x": -2.9999992847442627,
                                        "y": 5,
                                        "z": -1
                                    },
                                    "scale": {
                                        "x": 1,
                                        "y": 1,
                                        "z": 1
                                    },
                                    "rotation": {
                                        "y": -0.7071068286895752,
                                        "w": 0.7071068286895752
                                    },
                                    "stableTime": 0.30000001192092896,
                                    "respawnTime": 8
                                }
                            },
                            {
                                "levelNodeCrumbling": {
                                    "shape": 1004,
                                    "material": 7,
                                    "position": {
                                        "x": -5,
                                        "y": 5
                                    },
                                    "scale": {
                                        "x": 1,
                                        "y": 1,
                                        "z": 1
                                    },
                                    "rotation": {
                                        "y": -0.7071068286895752,
                                        "w": 0.7071068286895752
                                    },
                                    "stableTime": 0.10000000149011612,
                                    "respawnTime": 8
                                }
                            },
                            {
                                "levelNodeCrumbling": {
                                    "shape": 1004,
                                    "material": 7,
                                    "position": {
                                        "x": -4,
                                        "y": 5
                                    },
                                    "scale": {
                                        "x": 1,
                                        "y": 1,
                                        "z": 1
                                    },
                                    "rotation": {
                                        "y": -0.7071068286895752,
                                        "w": 0.7071068286895752
                                    },
                                    "stableTime": 0.20000000298023224,
                                    "respawnTime": 8
                                }
                            },
                            {
                                "levelNodeCrumbling": {
                                    "shape": 1004,
                                    "material": 7,
                                    "position": {
                                        "x": -2.9999992847442627,
                                        "y": 5
                                    },
                                    "scale": {
                                        "x": 1,
                                        "y": 1,
                                        "z": 1
                                    },
                                    "rotation": {
                                        "y": -0.7071068286895752,
                                        "w": 0.7071068286895752
                                    },
                                    "stableTime": 0.30000001192092896,
                                    "respawnTime": 8
                                }
                            },
                            {
                                "levelNodeCrumbling": {
                                    "shape": 1004,
                                    "material": 7,
                                    "position": {
                                        "x": -1.9999990463256836,
                                        "y": 5
                                    },
                                    "scale": {
                                        "x": 1,
                                        "y": 1,
                                        "z": 1
                                    },
                                    "rotation": {
                                        "y": -0.7071068286895752,
                                        "w": 0.7071068286895752
                                    },
                                    "stableTime": 0.4000000059604645,
                                    "respawnTime": 8
                                }
                            },
                            {
                                "levelNodeCrumbling": {
                                    "shape": 1003,
                                    "material": 7,
                                    "position": {
                                        "x": -1.9999990463256836,
                                        "y": 5,
                                        "z": -1
                                    },
                                    "scale": {
                                        "x": 1,
                                        "y": 1,
                                        "z": 1
                                    },
                                    "rotation": {
                                        "y": -0.7071068286895752,
                                        "w": 0.7071068286895752
                                    },
                                    "stableTime": 0.4000000059604645,
                                    "respawnTime": 8
                                }
                            },
                            {
                                "levelNodeCrumbling": {
                                    "shape": 1002,
                                    "material": 7,
                                    "position": {
                                        "x": -1.9999990463256836,
                                        "y": 5,
                                        "z": -2
                                    },
                                    "scale": {
                                        "x": 1,
                                        "y": 1,
                                        "z": 1
                                    },
                                    "rotation": {
                                        "y": -0.7071068286895752,
                                        "w": 0.7071068286895752
                                    },
                                    "stableTime": 0.4000000059604645,
                                    "respawnTime": 8
                                }
                            },
                            {
                                "levelNodeCrumbling": {
                                    "shape": 1001,
                                    "material": 7,
                                    "position": {
                                        "x": -1.9999990463256836,
                                        "y": 5,
                                        "z": -3
                                    },
                                    "scale": {
                                        "x": 1,
                                        "y": 1,
                                        "z": 1
                                    },
                                    "rotation": {
                                        "x": -0.5,
                                        "y": -0.5,
                                        "z": 0.5,
                                        "w": 0.5
                                    },
                                    "stableTime": 0.4000000059604645,
                                    "respawnTime": 8
                                }
                            },
                            {
                                "levelNodeCrumbling": {
                                    "shape": 1000,
                                    "material": 7,
                                    "position": {
                                        "x": -1.9999990463256836,
                                        "y": 5,
                                        "z": -4
                                    },
                                    "scale": {
                                        "x": 1,
                                        "y": 1,
                                        "z": 1
                                    },
                                    "rotation": {
                                        "w": 1
                                    },
                                    "stableTime": 0.4000000059604645,
                                    "respawnTime": 8
                                }
                            },
                            {
                                "levelNodeCrumbling": {
                                    "shape": 1000,
                                    "material": 7,
                                    "position": {
                                        "x": -1,
                                        "y": 5,
                                        "z": -4
                                    },
                                    "scale": {
                                        "x": 1,
                                        "y": 1,
                                        "z": 1
                                    },
                                    "rotation": {
                                        "w": 1
                                    },
                                    "stableTime": 1000,
                                    "respawnTime": 1000
                                }
                            },
                            {
                                "levelNodeCrumbling": {
                                    "shape": 1001,
                                    "material": 7,
                                    "position": {
                                        "x": -1,
                                        "y": 5,
                                        "z": -3
                                    },
                                    "scale": {
                                        "x": 1,
                                        "y": 1,
                                        "z": 1
                                    },
                                    "rotation": {
                                        "x": -0.5,
                                        "y": -0.5,
                                        "z": 0.5,
                                        "w": 0.5
                                    },
                                    "stableTime": 1000,
                                    "respawnTime": 1000
                                }
                            },
                            {
                                "levelNodeCrumbling": {
                                    "shape": 1002,
                                    "material": 7,
                                    "position": {
                                        "x": -1,
                                        "y": 5,
                                        "z": -2
                                    },
                                    "scale": {
                                        "x": 1,
                                        "y": 1,
                                        "z": 1
                                    },
                                    "rotation": {
                                        "y": -0.7071068286895752,
                                        "w": 0.7071068286895752
                                    },
                                    "stableTime": 1000,
                                    "respawnTime": 1000
                                }
                            },
                            {
                                "levelNodeCrumbling": {
                                    "shape": 1003,
                                    "material": 7,
                                    "position": {
                                        "x": -1,
                                        "y": 5,
                                        "z": -1
                                    },
                                    "scale": {
                                        "x": 1,
                                        "y": 1,
                                        "z": 1
                                    },
                                    "rotation": {
                                        "y": -0.7071068286895752,
                                        "w": 0.7071068286895752
                                    },
                                    "stableTime": 1000,
                                    "respawnTime": 1000
                                }
                            },
                            {
                                "levelNodeCrumbling": {
                                    "shape": 1004,
                                    "material": 7,
                                    "position": {
                                        "x": -1,
                                        "y": 5
                                    },
                                    "scale": {
                                        "x": 1,
                                        "y": 1,
                                        "z": 1
                                    },
                                    "rotation": {
                                        "y": -0.7071068286895752,
                                        "w": 0.7071068286895752
                                    },
                                    "stableTime": 1000,
                                    "respawnTime": 1000
                                }
                            },
                            {
                                "levelNodeGroup": {
                                    "position": {
                                        "y": 0,
                                        "x": 0,
                                        "z": 0
                                    },
                                    "rotation": {
                                        "w": 1
                                    },
                                    "childNodes": [
                                        {
                                            "levelNodeStatic": {
                                                "shape": 1000,
                                                "material": 8,
                                                "position": {
                                                    "x": -4.000000953674316,
                                                    "y": 4,
                                                    "z": -3
                                                },
                                                "scale": {
                                                    "x": 1,
                                                    "y": 1,
                                                    "z": 1
                                                },
                                                "rotation": {
                                                    "y": 1,
                                                    "w": -4.371138828673793e-8
                                                },
                                                "color": {},
                                                "isNeon": true
                                            }
                                        },
                                        {
                                            "levelNodeStatic": {
                                                "shape": 1001,
                                                "material": 8,
                                                "position": {
                                                    "x": -2.0000011920928955,
                                                    "y": 4,
                                                    "z": -3
                                                },
                                                "scale": {
                                                    "x": 1,
                                                    "y": 1,
                                                    "z": 1
                                                },
                                                "rotation": {
                                                    "w": 1
                                                },
                                                "color": {},
                                                "isNeon": true
                                            }
                                        },
                                        {
                                            "levelNodeStatic": {
                                                "shape": 1002,
                                                "material": 8,
                                                "position": {
                                                    "x": -9.5367431640625e-7,
                                                    "y": 4,
                                                    "z": -3
                                                },
                                                "scale": {
                                                    "x": 1,
                                                    "y": 1,
                                                    "z": 1
                                                },
                                                "rotation": {
                                                    "w": 1
                                                },
                                                "color": {},
                                                "isNeon": true
                                            }
                                        },
                                        {
                                            "levelNodeStatic": {
                                                "shape": 1003,
                                                "material": 8,
                                                "position": {
                                                    "x": 3.9999990463256836,
                                                    "y": 4,
                                                    "z": -3
                                                },
                                                "scale": {
                                                    "x": 1,
                                                    "y": 1,
                                                    "z": 1
                                                },
                                                "rotation": {
                                                    "y": 0.7071068286895752,
                                                    "w": 0.7071068286895752
                                                },
                                                "color": {},
                                                "isNeon": true
                                            }
                                        },
                                        {
                                            "levelNodeStatic": {
                                                "shape": 1004,
                                                "material": 8,
                                                "position": {
                                                    "x": 1.9999990463256836,
                                                    "y": 4,
                                                    "z": -3
                                                },
                                                "scale": {
                                                    "x": 1,
                                                    "y": 1,
                                                    "z": 1
                                                },
                                                "rotation": {
                                                    "y": -0.7071068286895752,
                                                    "w": 0.7071068286895752
                                                },
                                                "color": {},
                                                "isNeon": true
                                            }
                                        },
                                        {
                                            "levelNodeStatic": {
                                                "shape": 1000,
                                                "material": 8,
                                                "position": {
                                                    "x": -4.000000953674316,
                                                    "y": 4,
                                                    "z": -1.0000001192092896
                                                },
                                                "scale": {
                                                    "x": 1,
                                                    "y": 1,
                                                    "z": 1
                                                },
                                                "rotation": {
                                                    "y": 1,
                                                    "w": -4.371138828673793e-8
                                                },
                                                "color": {
                                                    "r": 1
                                                },
                                                "isNeon": true
                                            }
                                        },
                                        {
                                            "levelNodeStatic": {
                                                "shape": 1001,
                                                "material": 8,
                                                "position": {
                                                    "x": -2.0000009536743164,
                                                    "y": 4,
                                                    "z": -1.0000001192092896
                                                },
                                                "scale": {
                                                    "x": 1,
                                                    "y": 1,
                                                    "z": 1
                                                },
                                                "rotation": {
                                                    "w": 1
                                                },
                                                "color": {
                                                    "r": 1
                                                },
                                                "isNeon": true
                                            }
                                        },
                                        {
                                            "levelNodeStatic": {
                                                "shape": 1002,
                                                "material": 8,
                                                "position": {
                                                    "x": -9.5367431640625e-7,
                                                    "y": 4,
                                                    "z": -1.0000001192092896
                                                },
                                                "scale": {
                                                    "x": 1,
                                                    "y": 1,
                                                    "z": 1
                                                },
                                                "rotation": {
                                                    "y": 0.7071068286895752,
                                                    "w": 0.7071068286895752
                                                },
                                                "color": {
                                                    "r": 1
                                                },
                                                "isNeon": true
                                            }
                                        },
                                        {
                                            "levelNodeStatic": {
                                                "shape": 1003,
                                                "material": 8,
                                                "position": {
                                                    "x": 3.9999990463256836,
                                                    "y": 4,
                                                    "z": -1.0000001192092896
                                                },
                                                "scale": {
                                                    "x": 1,
                                                    "y": 1,
                                                    "z": 1
                                                },
                                                "rotation": {
                                                    "y": 0.7071068286895752,
                                                    "w": 0.7071068286895752
                                                },
                                                "color": {
                                                    "r": 1
                                                },
                                                "isNeon": true
                                            }
                                        },
                                        {
                                            "levelNodeStatic": {
                                                "shape": 1004,
                                                "material": 8,
                                                "position": {
                                                    "x": 1.9999990463256836,
                                                    "y": 4,
                                                    "z": -1.0000001192092896
                                                },
                                                "scale": {
                                                    "x": 1,
                                                    "y": 1,
                                                    "z": 1
                                                },
                                                "rotation": {
                                                    "y": -0.7071068286895752,
                                                    "w": 0.7071068286895752
                                                },
                                                "color": {
                                                    "r": 1
                                                },
                                                "isNeon": true
                                            }
                                        },
                                        {
                                            "levelNodeStatic": {
                                                "shape": 1000,
                                                "material": 8,
                                                "position": {
                                                    "x": -4.000000953674316,
                                                    "y": 4,
                                                    "z": 0.9999998807907104
                                                },
                                                "scale": {
                                                    "x": 1,
                                                    "y": 1,
                                                    "z": 1
                                                },
                                                "rotation": {
                                                    "y": -1,
                                                    "w": -4.371138828673793e-8
                                                },
                                                "color": {
                                                    "g": 1
                                                },
                                                "isNeon": true
                                            }
                                        },
                                        {
                                            "levelNodeStatic": {
                                                "shape": 1001,
                                                "material": 8,
                                                "position": {
                                                    "x": -2.0000009536743164,
                                                    "y": 4,
                                                    "z": 0.9999996423721313
                                                },
                                                "scale": {
                                                    "x": 1,
                                                    "y": 1,
                                                    "z": 1
                                                },
                                                "rotation": {
                                                    "w": 1
                                                },
                                                "color": {
                                                    "g": 1
                                                },
                                                "isNeon": true
                                            }
                                        },
                                        {
                                            "levelNodeStatic": {
                                                "shape": 1002,
                                                "material": 8,
                                                "position": {
                                                    "x": -9.5367431640625e-7,
                                                    "y": 4,
                                                    "z": 0.9999998807907104
                                                },
                                                "scale": {
                                                    "x": 1,
                                                    "y": 1,
                                                    "z": 1
                                                },
                                                "rotation": {
                                                    "y": 0.7071068286895752,
                                                    "w": 0.7071068286895752
                                                },
                                                "color": {
                                                    "g": 1
                                                },
                                                "isNeon": true
                                            }
                                        },
                                        {
                                            "levelNodeStatic": {
                                                "shape": 1003,
                                                "material": 8,
                                                "position": {
                                                    "x": 3.9999990463256836,
                                                    "y": 4,
                                                    "z": 0.9999997615814209
                                                },
                                                "scale": {
                                                    "x": 1,
                                                    "y": 1,
                                                    "z": 1
                                                },
                                                "rotation": {
                                                    "y": 0.7071068286895752,
                                                    "w": 0.7071068286895752
                                                },
                                                "color": {
                                                    "g": 1
                                                },
                                                "isNeon": true
                                            }
                                        },
                                        {
                                            "levelNodeStatic": {
                                                "shape": 1004,
                                                "material": 8,
                                                "position": {
                                                    "x": 1.9999990463256836,
                                                    "y": 4,
                                                    "z": 0.9999998807907104
                                                },
                                                "scale": {
                                                    "x": 1,
                                                    "y": 1,
                                                    "z": 1
                                                },
                                                "rotation": {
                                                    "y": -0.7071068286895752,
                                                    "w": 0.7071068286895752
                                                },
                                                "color": {
                                                    "g": 1
                                                },
                                                "isNeon": true
                                            }
                                        },
                                        {
                                            "levelNodeStatic": {
                                                "shape": 1000,
                                                "material": 8,
                                                "position": {
                                                    "x": -4.000000953674316,
                                                    "y": 4,
                                                    "z": 3
                                                },
                                                "scale": {
                                                    "x": 1,
                                                    "y": 1,
                                                    "z": 1
                                                },
                                                "rotation": {
                                                    "y": -1,
                                                    "w": -4.371138828673793e-8
                                                },
                                                "color": {
                                                    "b": 1
                                                },
                                                "isNeon": true
                                            }
                                        },
                                        {
                                            "levelNodeStatic": {
                                                "shape": 1001,
                                                "material": 8,
                                                "position": {
                                                    "x": -2.0000009536743164,
                                                    "y": 4,
                                                    "z": 3
                                                },
                                                "scale": {
                                                    "x": 1,
                                                    "y": 1,
                                                    "z": 1
                                                },
                                                "rotation": {
                                                    "w": 1
                                                },
                                                "color": {
                                                    "b": 1
                                                },
                                                "isNeon": true
                                            }
                                        },
                                        {
                                            "levelNodeStatic": {
                                                "shape": 1002,
                                                "material": 8,
                                                "position": {
                                                    "x": -9.5367431640625e-7,
                                                    "y": 4,
                                                    "z": 2.999999523162842
                                                },
                                                "scale": {
                                                    "x": 1,
                                                    "y": 1,
                                                    "z": 1
                                                },
                                                "rotation": {
                                                    "w": 1
                                                },
                                                "color": {
                                                    "b": 1
                                                },
                                                "isNeon": true
                                            }
                                        },
                                        {
                                            "levelNodeStatic": {
                                                "shape": 1003,
                                                "material": 8,
                                                "position": {
                                                    "x": 3.9999990463256836,
                                                    "y": 4,
                                                    "z": 3
                                                },
                                                "scale": {
                                                    "x": 1,
                                                    "y": 1,
                                                    "z": 1
                                                },
                                                "rotation": {
                                                    "y": 0.7071068286895752,
                                                    "w": 0.7071068286895752
                                                },
                                                "color": {
                                                    "b": 1
                                                },
                                                "isNeon": true
                                            }
                                        },
                                        {
                                            "levelNodeStatic": {
                                                "shape": 1004,
                                                "material": 8,
                                                "position": {
                                                    "x": 1.9999990463256836,
                                                    "y": 4,
                                                    "z": 3
                                                },
                                                "scale": {
                                                    "x": 1,
                                                    "y": 1,
                                                    "z": 1
                                                },
                                                "rotation": {
                                                    "y": -0.7071068286895752,
                                                    "w": 0.7071068286895752
                                                },
                                                "color": {
                                                    "b": 1
                                                },
                                                "isNeon": true
                                            }
                                        }
                                    ],
                                    "scale": {
                                        "y": 1,
                                        "x": 1,
                                        "z": 1
                                    }
                                }
                            }
                        ],
                        "scale": {
                            "y": 1,
                            "x": 1,
                            "z": 1
                        }
                    }
                }
            ],
            "scale": {
                "y": 1,
                "x": 1,
                "z": 1
            }
        }
    };
            obj = JSON.parse(document.getElementById('out').value);
            obj.levelNodes.push(crumbling);
            document.getElementById('out').value = JSON.stringify(obj, null, 4);
        });

        document.getElementById("add-colors").addEventListener('click', function () {
            var colors = {
                "levelNodeGroup": {
                    "position": {
                        "y": 0,
                        "x": 0,
                        "z": 0
                    },
                    "rotation": {
                        "w": 1
                    },
                    "childNodes": [
                        {
                            "levelNodeStatic": {
                                "shape": 1000,
                                "material": 8,
                                "position": {
                                    "x": -4.000000953674316,
                                    "y": 4,
                                    "z": -3
                                },
                                "scale": {
                                    "x": 1,
                                    "y": 1,
                                    "z": 1
                                },
                                "rotation": {
                                    "y": 1,
                                    "w": -4.371138828673793e-8
                                },
                                "color": {},
                                "isNeon": true
                            }
                        },
                        {
                            "levelNodeStatic": {
                                "shape": 1001,
                                "material": 8,
                                "position": {
                                    "x": -2.0000011920928955,
                                    "y": 4,
                                    "z": -3
                                },
                                "scale": {
                                    "x": 1,
                                    "y": 1,
                                    "z": 1
                                },
                                "rotation": {
                                    "w": 1
                                },
                                "color": {},
                                "isNeon": true
                            }
                        },
                        {
                            "levelNodeStatic": {
                                "shape": 1002,
                                "material": 8,
                                "position": {
                                    "x": -9.5367431640625e-7,
                                    "y": 4,
                                    "z": -3
                                },
                                "scale": {
                                    "x": 1,
                                    "y": 1,
                                    "z": 1
                                },
                                "rotation": {
                                    "w": 1
                                },
                                "color": {},
                                "isNeon": true
                            }
                        },
                        {
                            "levelNodeStatic": {
                                "shape": 1003,
                                "material": 8,
                                "position": {
                                    "x": 3.9999990463256836,
                                    "y": 4,
                                    "z": -3
                                },
                                "scale": {
                                    "x": 1,
                                    "y": 1,
                                    "z": 1
                                },
                                "rotation": {
                                    "y": 0.7071068286895752,
                                    "w": 0.7071068286895752
                                },
                                "color": {},
                                "isNeon": true
                            }
                        },
                        {
                            "levelNodeStatic": {
                                "shape": 1004,
                                "material": 8,
                                "position": {
                                    "x": 1.9999990463256836,
                                    "y": 4,
                                    "z": -3
                                },
                                "scale": {
                                    "x": 1,
                                    "y": 1,
                                    "z": 1
                                },
                                "rotation": {
                                    "y": -0.7071068286895752,
                                    "w": 0.7071068286895752
                                },
                                "color": {},
                                "isNeon": true
                            }
                        },
                        {
                            "levelNodeStatic": {
                                "shape": 1000,
                                "material": 8,
                                "position": {
                                    "x": -4.000000953674316,
                                    "y": 4,
                                    "z": -1.0000001192092896
                                },
                                "scale": {
                                    "x": 1,
                                    "y": 1,
                                    "z": 1
                                },
                                "rotation": {
                                    "y": 1,
                                    "w": -4.371138828673793e-8
                                },
                                "color": {
                                    "r": 1
                                },
                                "isNeon": true
                            }
                        },
                        {
                            "levelNodeStatic": {
                                "shape": 1001,
                                "material": 8,
                                "position": {
                                    "x": -2.0000009536743164,
                                    "y": 4,
                                    "z": -1.0000001192092896
                                },
                                "scale": {
                                    "x": 1,
                                    "y": 1,
                                    "z": 1
                                },
                                "rotation": {
                                    "w": 1
                                },
                                "color": {
                                    "r": 1
                                },
                                "isNeon": true
                            }
                        },
                        {
                            "levelNodeStatic": {
                                "shape": 1002,
                                "material": 8,
                                "position": {
                                    "x": -9.5367431640625e-7,
                                    "y": 4,
                                    "z": -1.0000001192092896
                                },
                                "scale": {
                                    "x": 1,
                                    "y": 1,
                                    "z": 1
                                },
                                "rotation": {
                                    "y": 0.7071068286895752,
                                    "w": 0.7071068286895752
                                },
                                "color": {
                                    "r": 1
                                },
                                "isNeon": true
                            }
                        },
                        {
                            "levelNodeStatic": {
                                "shape": 1003,
                                "material": 8,
                                "position": {
                                    "x": 3.9999990463256836,
                                    "y": 4,
                                    "z": -1.0000001192092896
                                },
                                "scale": {
                                    "x": 1,
                                    "y": 1,
                                    "z": 1
                                },
                                "rotation": {
                                    "y": 0.7071068286895752,
                                    "w": 0.7071068286895752
                                },
                                "color": {
                                    "r": 1
                                },
                                "isNeon": true
                            }
                        },
                        {
                            "levelNodeStatic": {
                                "shape": 1004,
                                "material": 8,
                                "position": {
                                    "x": 1.9999990463256836,
                                    "y": 4,
                                    "z": -1.0000001192092896
                                },
                                "scale": {
                                    "x": 1,
                                    "y": 1,
                                    "z": 1
                                },
                                "rotation": {
                                    "y": -0.7071068286895752,
                                    "w": 0.7071068286895752
                                },
                                "color": {
                                    "r": 1
                                },
                                "isNeon": true
                            }
                        },
                        {
                            "levelNodeStatic": {
                                "shape": 1000,
                                "material": 8,
                                "position": {
                                    "x": -4.000000953674316,
                                    "y": 4,
                                    "z": 0.9999998807907104
                                },
                                "scale": {
                                    "x": 1,
                                    "y": 1,
                                    "z": 1
                                },
                                "rotation": {
                                    "y": -1,
                                    "w": -4.371138828673793e-8
                                },
                                "color": {
                                    "g": 1
                                },
                                "isNeon": true
                            }
                        },
                        {
                            "levelNodeStatic": {
                                "shape": 1001,
                                "material": 8,
                                "position": {
                                    "x": -2.0000009536743164,
                                    "y": 4,
                                    "z": 0.9999996423721313
                                },
                                "scale": {
                                    "x": 1,
                                    "y": 1,
                                    "z": 1
                                },
                                "rotation": {
                                    "w": 1
                                },
                                "color": {
                                    "g": 1
                                },
                                "isNeon": true
                            }
                        },
                        {
                            "levelNodeStatic": {
                                "shape": 1002,
                                "material": 8,
                                "position": {
                                    "x": -9.5367431640625e-7,
                                    "y": 4,
                                    "z": 0.9999998807907104
                                },
                                "scale": {
                                    "x": 1,
                                    "y": 1,
                                    "z": 1
                                },
                                "rotation": {
                                    "y": 0.7071068286895752,
                                    "w": 0.7071068286895752
                                },
                                "color": {
                                    "g": 1
                                },
                                "isNeon": true
                            }
                        },
                        {
                            "levelNodeStatic": {
                                "shape": 1003,
                                "material": 8,
                                "position": {
                                    "x": 3.9999990463256836,
                                    "y": 4,
                                    "z": 0.9999997615814209
                                },
                                "scale": {
                                    "x": 1,
                                    "y": 1,
                                    "z": 1
                                },
                                "rotation": {
                                    "y": 0.7071068286895752,
                                    "w": 0.7071068286895752
                                },
                                "color": {
                                    "g": 1
                                },
                                "isNeon": true
                            }
                        },
                        {
                            "levelNodeStatic": {
                                "shape": 1004,
                                "material": 8,
                                "position": {
                                    "x": 1.9999990463256836,
                                    "y": 4,
                                    "z": 0.9999998807907104
                                },
                                "scale": {
                                    "x": 1,
                                    "y": 1,
                                    "z": 1
                                },
                                "rotation": {
                                    "y": -0.7071068286895752,
                                    "w": 0.7071068286895752
                                },
                                "color": {
                                    "g": 1
                                },
                                "isNeon": true
                            }
                        },
                        {
                            "levelNodeStatic": {
                                "shape": 1000,
                                "material": 8,
                                "position": {
                                    "x": -4.000000953674316,
                                    "y": 4,
                                    "z": 3
                                },
                                "scale": {
                                    "x": 1,
                                    "y": 1,
                                    "z": 1
                                },
                                "rotation": {
                                    "y": -1,
                                    "w": -4.371138828673793e-8
                                },
                                "color": {
                                    "b": 1
                                },
                                "isNeon": true
                            }
                        },
                        {
                            "levelNodeStatic": {
                                "shape": 1001,
                                "material": 8,
                                "position": {
                                    "x": -2.0000009536743164,
                                    "y": 4,
                                    "z": 3
                                },
                                "scale": {
                                    "x": 1,
                                    "y": 1,
                                    "z": 1
                                },
                                "rotation": {
                                    "w": 1
                                },
                                "color": {
                                    "b": 1
                                },
                                "isNeon": true
                            }
                        },
                        {
                            "levelNodeStatic": {
                                "shape": 1002,
                                "material": 8,
                                "position": {
                                    "x": -9.5367431640625e-7,
                                    "y": 4,
                                    "z": 2.999999523162842
                                },
                                "scale": {
                                    "x": 1,
                                    "y": 1,
                                    "z": 1
                                },
                                "rotation": {
                                    "w": 1
                                },
                                "color": {
                                    "b": 1
                                },
                                "isNeon": true
                            }
                        },
                        {
                            "levelNodeStatic": {
                                "shape": 1003,
                                "material": 8,
                                "position": {
                                    "x": 3.9999990463256836,
                                    "y": 4,
                                    "z": 3
                                },
                                "scale": {
                                    "x": 1,
                                    "y": 1,
                                    "z": 1
                                },
                                "rotation": {
                                    "y": 0.7071068286895752,
                                    "w": 0.7071068286895752
                                },
                                "color": {
                                    "b": 1
                                },
                                "isNeon": true
                            }
                        },
                        {
                            "levelNodeStatic": {
                                "shape": 1004,
                                "material": 8,
                                "position": {
                                    "x": 1.9999990463256836,
                                    "y": 4,
                                    "z": 3
                                },
                                "scale": {
                                    "x": 1,
                                    "y": 1,
                                    "z": 1
                                },
                                "rotation": {
                                    "y": -0.7071068286895752,
                                    "w": 0.7071068286895752
                                },
                                "color": {
                                    "b": 1
                                },
                                "isNeon": true
                            }
                        }
                    ],
                    "scale": {
                        "y": 1,
                        "x": 1,
                        "z": 1
                    }
                }
            };
            obj = JSON.parse(document.getElementById('out').value);
            obj.levelNodes.push(colors);
            document.getElementById('out').value = JSON.stringify(obj, null, 4);
        });

        document.getElementById("clear-info").addEventListener('click', function () {
            obj = JSON.parse(document.getElementById('out').value);
            obj.title = "";
            obj.description = "";
            obj.creators = "";
            document.getElementById('out').value = JSON.stringify(obj, null, 4);
        });

        document.getElementById("reset-ambience").addEventListener('click', function () {
            obj = JSON.parse(document.getElementById('out').value);
            obj.ambienceSettings = {
                        "skyZenithColor": {
                            "r": 0,
                            "g": 0,
                            "b": 0,
                            "a": 1
                        },
                        "skyHorizonColor": {
                            "r": 0,
                            "g": 0,
                            "b": 0,
                            "a": 1
                        },
                        "sunAltitude": 0,
                        "sunAzimuth": 0,
                        "sunSize": 1,
                        "fogDDensity": 0
                    };
            document.getElementById('out').value = JSON.stringify(obj, null, 4);
        });

        document.getElementById("max-ambience").addEventListener('click', function () {
            obj = JSON.parse(document.getElementById('out').value);
            obj.ambienceSettings = {
                        "skyZenithColor": {
                            "r": 32000,
                            "g": 32000,
                            "b": 32000,
                            "a": 1
                        },
                        "skyHorizonColor": {
                            "r": 32000,
                            "g": 32000,
                            "b": 32000,
                            "a": 1
                        },
                        "sunAltitude": 32000,
                        "sunAzimuth": 32000,
                        "sunSize": 32000,
                        "fogDDensity": 32000
                    };
            document.getElementById('out').value = JSON.stringify(obj, null, 4);
        });
        
        document.getElementById("load-empty").addEventListener('click', function () {
            obj = {
                    "formatVersion": 6,
                    "title": "",
                    "creators": "",
                    "description": "",
                    "levelNodes": [],
                    "maxCheckpointCount": 0,
                    "ambienceSettings": {
                        "skyZenithColor": {
                            "r": 0,
                            "g": 0,
                            "b": 0,
                            "a": 1
                        },
                        "skyHorizonColor": {
                            "r": 0,
                            "g": 0,
                            "b": 0,
                            "a": 1
                        },
                        "sunAltitude": 0,
                        "sunAzimuth": 0,
                        "sunSize": 1,
                        "fogDDensity": 0
                    }
                }
                document.getElementById('out').value = JSON.stringify(obj, null, 4);
        });
        document.getElementById('file').addEventListener("change", function (e) {loadFile(e)}, false);
        document.getElementById('file-a').addEventListener("change", function (e) {loadFile(e, true)}, false);
        document.getElementById('file-append').addEventListener("change", function (e) {appendFile(e)}, false);
        document.getElementById('out').value = JSON.stringify({
                        "formatVersion": 6,
                        "title": "",
                        "creators": "",
                        "description": "",
                        "levelNodes": [],
                        "maxCheckpointCount": 0,
                        "ambienceSettings": {
                            "skyZenithColor": {
                                "r": 0,
                                "g": 0,
                                "b": 0,
                                "a": 1
                            },
                            "skyHorizonColor": {
                                "r": 0,
                                "g": 0,
                                "b": 0,
                                "a": 1
                            },
                            "sunAltitude": 0,
                            "sunAzimuth": 0,
                            "sunSize": 1,
                            "fogDDensity": 0
                        }
                    }, null, 4);
        document.getElementById('out').style.display = "block";
        document.getElementsByClassName('leg')[0].style.display = "flex";
    </script>
    <script src="visual-editor.js" type="module"></script>
</body>
</html>
